<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Reich Lab @ UMassAmherst">
<meta name="author" content="Nick">
<meta name="keywords" content="blog">
<link rel="canonical" href="http://reichlab.io//2017/11/28/flusight-ensemble.html">

<title>
  Building a collaborative ensemble to forecast influenza &#8211; Nicholas Reich: Biostatistics and Infectious Disease Epidemiology
</title>

<link href="/assets/css/spectre.min.css" rel="stylesheet">
<link href="/css/custom.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/icon-css/font/flaticon.css"> 
<link rel="stylesheet" href="css/icon-css/google-scholar/css/academicons.css"/> <!--Google Scholar logo-->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro" rel="stylesheet">

<!-- Favicon -->
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/images/favicons/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/favicons/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/favicons/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/favicons/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/assets/images/favicons/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/images/favicons/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="/assets/images/favicons/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/images/favicons/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-128x128.png" sizes="128x128" />
<meta name="application-name" content="&nbsp;"/>
<meta name="msapplication-TileColor" content="#881c1c" />
<meta name="msapplication-TileImage" content="/assets/images/favicons/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="/assets/images/favicons/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="/assets/images/favicons/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="/assets/images/favicons/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="/assets/images/favicons/mstile-310x310.png" />

<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Building a collaborative ensemble to forecast influenza">
<meta property="og:description" content="Reich Lab @ UMassAmherst">
<meta property="og:url" content="http://reichlab.io//2017/11/28/flusight-ensemble.html">
<meta property="og:site_name" content="Nicholas Reich: Biostatistics and Infectious Disease Epidemiology">

<meta name="twitter:url" content="http://reichlab.io//2017/11/28/flusight-ensemble.html">
<meta name="twitter:title" content="Building a collaborative ensemble to forecast influenza">
<meta name="twitter:description" content="Reich Lab @ UMassAmherst">

<meta itemprop="name" content="Building a collaborative ensemble to forecast influenza">
<meta itemprop="description" content="Reich Lab @ UMassAmherst">

  </head>
  <body>
    <div class="nav-accent"></div>
<section class="section-nav bg-gray">
  <section class="container grid-custom">
    <div class="columns">
      <header class="navbar column col-12">
          <a href="/" class="navbar-brand mr-10">
            <img src="/assets/images/logo/nav-logo.png" alt="Reich Lab">
          </a>
        <section class="navbar-section">
          <!-- Show this segment when in small device -->
          <div class="dropdown dropdown-right show-sm">
            <a href="#" class="btn btn-link btn-lg dropdown-toggle" tabindex="0">
              <i class="fa fa-navicon"></i>
            </a>
            <ul class="menu">                
              <li><a href="/people" class="btn btn-link">People</a></li>
              <li><a href="/research" class="btn btn-link">Research</a></li>
<!--               <li><a href="/teaching" class="btn btn-link">Teaching</a></li> -->
              <li><a href="/publications" class="btn btn-link">Publications</a></li>
              <li><a href="/blog" class="btn btn-link">Blog</a></li>
              <li>
                <div class="dropdown dropdown-right show-sm">
                  <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">
                    Software <i class="fa fa-caret-down"></i>
                  </a>
                 <ul class="menu">
                   <li><a href="http://nickreich.github.io/coarseDataTools" class="btn btn-link">coarseDataTools</a></li>
                   <li><a href="/zoltr" class="btn btn-link">zoltr</a></li>
                   <li><a href="https://github.com/reichlab/zoltpy" class="btn btn-link">zoltpy</a></li>
                   <li><a href="/covidHubUtils" class="btn btn-link">covidHubUtils</a></li>
                   <li><a href="https://github.com/reichlab/covidData" class="btn btn-link">covidData</a></li>
                   <li><a href="https://github.com/reichlab/sarimaTD" class="btn btn-link">sarimaTD</a></li>
                   <li><a href="https://github.com/reichlab/kcde" class="btn btn-link">kcde</a></li>
                   <li><a href="/d3-foresight" class="btn btn-link">d3-foresight</a></li>
                   <li><a href="https://github.com/reichlab/predtimechart" class="btn btn-link">predtimechart</a></li>
                 </ul>
                </div>
              </li>
              <li>
                <div class="dropdown dropdown-right show-sm">
                  <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">
                    Projects <i class="fa fa-caret-down"></i>
                  </a>
                 <ul class="menu">
                   <li><a href="https://hubdocs.readthedocs.io/en/latest/" class="btn btn-link">Hubverse</a></li>
                   <li><a href="https://covid19forecasthub.org/" class="btn btn-link">US COVID-19 Forecast Hub</a></li>
                   <li><a href="/flusightnetwork" class="btn btn-link">FluSight Network</a></li>
                   <li><a href="https://zoltardata.com/" class="btn btn-link">Zoltar</a></li>
                   <li><a href="/alert" class="btn btn-link">ALERT</a></li>
                 </ul>
                </div>
              </li>
              <li>
                <div class="dropdown dropdown-right show-sm">
                  <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">
                    Dashboards <i class="fa fa-caret-down"></i>
                  </a>
                 <ul class="menu">
                   <li><a href="https://reichlab.io/flusight-eval/" class="btn btn-link">FluSight (2023/24)</a></li>
                   <li><a href="https://viz.covid19forecasthub.org/" class="btn btn-link">Covid</a></li>
                   <li><a href="http://flusightnetwork.io/" class="btn btn-link">FluSight (historical)</a></li>
                 </ul>
                </div>
              </li>
            </ul>
          </div>

          <!-- Hide this segment when in small device -->
          <div class="hide-sm">
            <a href="/people" class="btn btn-link">People</a>
            <a href="/research" class="btn btn-link">Research</a>
<!--             <a href="/teaching" class="btn btn-link">Teaching</a> -->
            <a href="/publications" class="btn btn-link">Publications</a>
            <a href="/blog" class="btn btn-link">Blog</a>
            <div class="dropdown dropdown-right">
              <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">
                Software <i class="fa fa-caret-down"></i>
              </a>
              <ul class="menu">
                <li><a href="http://nickreich.github.io/coarseDataTools" class="btn btn-link">coarseDataTools</a></li>
                <li><a href="/zoltr" class="btn btn-link">zoltr</a></li>
                <li><a href="https://github.com/reichlab/zoltpy" class="btn btn-link">zoltpy</a></li>
                <li><a href="/covidHubUtils" class="btn btn-link">covidHubUtils</a></li>
                <li><a href="https://github.com/reichlab/covidData" class="btn btn-link">covidData</a></li>
                <li><a href="https://github.com/reichlab/sarimaTD" class="btn btn-link">sarimaTD</a></li>
                <li><a href="https://github.com/reichlab/kcde" class="btn btn-link">kcde</a></li>
                <li><a href="/d3-foresight" class="btn btn-link">d3-foresight</a></li>
                <li><a href="https://github.com/reichlab/predtimechart" class="btn btn-link">predtimechart</a></li>
              </ul>
            </div>
            <div class="dropdown dropdown-right">
              <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">
                Projects <i class="fa fa-caret-down"></i>
              </a>
              <ul class="menu">
                <li><a href="https://hubdocs.readthedocs.io/en/latest/" class="btn btn-link">Hubverse</a></li>
                <li><a href="https://covid19forecasthub.org/" class="btn btn-link">US COVID-19 Forecast Hub</a></li>
                <li><a href="/flusightnetwork" class="btn btn-link">FluSight Network</a></li>
                <li><a href="https://zoltardata.com/" class="btn btn-link">Zoltar</a></li>
                <li><a href="/alert" class="btn btn-link">ALERT</a></li>
              </ul>
            </div>
            <div class="dropdown dropdown-right">
              <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">
                Dashboards <i class="fa fa-caret-down"></i>
              </a>
              <ul class="menu">
                <li><a href="https://reichlab.io/flusight-eval/" class="btn btn-link">FluSight (2023/24)</a></li>
                <li><a href="https://viz.covid19forecasthub.org/" class="btn btn-link">Covid</a></li>
                <li><a href="http://flusightnetwork.io/" class="btn btn-link">FluSight (historical)</a></li>
              </ul>
            </div>
          </div>
        </section>
      </header>
    </div>
  </section>
</section>


    <section class="container container-body grid-custom">
      <div class="columns">
        <div class="column col-8 col-md-12">
          <h1>Building a collaborative ensemble to forecast influenza</h1>
          <p>
            by <em>Nick</em>
          </p>
          <p><i class="fa fa-clock-o"></i> Posted on 28 November, 2017</p>
        </div>
      </div>
      <div class="columns">
        <div class="column col-8 col-md-12">
          <p>In March 2017, a group of influenza forecasters who have participated in the <a href="https://predict.phiresearchlab.org">CDC FluSight challenge</a> in past seasons established the FluSight Network, a multi-institution and multi-disciplinary consortium of forecasting teams. This group worked throughout 2017 to create a public, real-time collaborative ensemble forecasting model that provides <a href="http://flusightnetwork.io/">updated forecasts of influenza in the US each week</a>.</p>

<p><a href="http://flusightnetwork.io"><img class="img-responsive" width="700" src="/images/blog/collaborative-ensemble-overview.png" /></a></p>

<!--more-->

<h3 id="background">Background</h3>
<p>Every flu season since 2013/2014, the CDC has organized a challenge where, each week from early November through mid April, teams submit forecasts about the flu season in the US.
For every week in a season, each submission contains forecasts for seven targets of public health interest specified by the CDC for each of the 11 HHS regions. The region-level targets are: the fraction of doctor’s visits where due to influenza-like-illness in each of the next four weeks of the season, the week of season onset, the week in which the peak wILI occurs, and the level of the peak wILI.
The forecasts themselves are text files containing, in a specified format, data that encode predictive distribution for these targets.</p>

<p>Throughout this project, the central question has been <strong>can we provide better information to decision makers by combining forecasting models</strong>, and specifically by using past performance of the component models to inform the ensemble approach. All previous participants in FluSight challenges were invited to join the FluSight Network. Four groups decided to participate and contributed <a href="https://github.com/FluSightNetwork/cdc-flusight-ensemble/tree/master/model-forecasts">21 models in total</a> using a diverse array of methodologies, including kernel conditional density estimation, Bayesian state-space models, simple seasonal models, auto-regressive models for time-series, and susceptible-infectious-recovered-susceptible compartmental models, to name just a few.</p>

<table>
  <thead>
    <tr>
      <th>Institution</th>
      <th>No. of models</th>
      <th>Team leaders</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Delphi team at Carnegie Mellon</td>
      <td>9</td>
      <td>Logan Brooks, Roni Rosenfeld</td>
    </tr>
    <tr>
      <td>Columbia University</td>
      <td>7</td>
      <td>Teresa Yamana, Sasikiran Kandula, Jeff Shaman</td>
    </tr>
    <tr>
      <td>Los Alamos National Laboratory</td>
      <td>1</td>
      <td>Dave Osthus</td>
    </tr>
    <tr>
      <td>Reich Lab at UMass-Amherst</td>
      <td>4</td>
      <td>Nicholas Reich, Abhinav Tushar, Evan Ray</td>
    </tr>
  </tbody>
</table>

<p>Prior to the start of the 2017/2018 influenza season in the US (first submissions were due on November 6), we assembled these 21 distinct forecasting models for influenza, each with forecasts from the last seven influenza seasons in the US. (To the extent possible, these forecasts were only allowed to use data available at the time the forecasts were made.)</p>

<p>Subsequently, we conducted a cross-validation study to compare five different methods for combining these models into a single ensemble forecast. Specifically, this was done by leaving one season out at a time, fitting each ensemble model based on the remaining seasons’ data, and generating ensemble forecasts for each week of the left-out season. Then, we evaluated and compared the performance of the ensemble models.</p>

<h3 id="ensemble-specifications">Ensemble specifications</h3>
<p>All of our ensemble models are built by taking weighted averages of the component models. We examined the performance of five different possible ensemble specifications (see table below). The “equal weights” model takes a simple average of all of the models, with no consideration of past performance. The other four approaches estimated weights for models based on past performance, using the degenerate EM algorithm.</p>

<table>
  <thead>
    <tr>
      <th>Model</th>
      <th>No. of weights</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Equal weights (EW)</td>
      <td>1</td>
      <td>Every model gets same weight.</td>
    </tr>
    <tr>
      <td>Constant weights (CW)</td>
      <td>21</td>
      <td>Every model gets a single weight, not necessarily the same.</td>
    </tr>
    <tr>
      <td>Target-type-based weights (TTW)</td>
      <td>42</td>
      <td>Two sets of weights, one for seasonal targets and one for weekly wILI targets.</td>
    </tr>
    <tr>
      <td>Target-based weights (TW)</td>
      <td>147</td>
      <td>Seven sets of weights, one for each target separately.</td>
    </tr>
    <tr>
      <td>Target-and-region-based weights (TRW)</td>
      <td>1,617</td>
      <td>Target-based weights estimated separately for each region.</td>
    </tr>
  </tbody>
</table>

<h3 id="forecast-evaluation">Forecast Evaluation</h3>
<p>We measured performance by computing the average score across all targets and all relevant weeks in the last seven seasons. (Including only “relevant weeks” means, e.g., that for evaluating season onset we exclude weeks after the onset has clearly occured, because at this point, the forecasts are no longer informative.) The ensemble models generally showed better average scores than any of the component models, and there was little difference between the CW, TTW, TW, and TRW models.</p>

<p>For submitting in real-time in 2017-2018, we selected the ensemble model that achieved the best overall score in the cross-validation experiment over the last seven seasons. This was the target-type-based model (TTW) that assigned one set of weights to each component model for the weekly incidence targets and another set of weights for the seasonal targets (onset timing, peak timing, and peak incidence).</p>

<p><img class="img-responsive" width="700" src="/images/blog/collaborative-ensemble-comparison.jpeg" /></p>



          
            <div id="disqus_thread"></div>
<script type="text/javascript">
 var disqus_config = function () {
   this.page = this.page || {};
   this.page.url = 'http://reichlab.io//2017/11/28/flusight-ensemble.html';
   this.page.identifier = '/2017/11/28/flusight-ensemble.html';
   this.page.title = 'Building a collaborative ensemble to forecast influenza';
 };
 (function() {  // DON'T EDIT BELOW THIS LINE
   var d = document, s = d.createElement('script');
   s.src = 'https://reichlab.disqus.com/embed.js';
   s.setAttribute('data-timestamp', +new Date());
   (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript" rel="nofollow">
    comments powered by Disqus.
  </a>
</noscript>

          
        </div>
      </div>
    </section>

    <footer class="bg-gray">
  <section class="section-footer container grid-custom">
    <div class="columns">
      <div class="column col-12">
        <p>
          <a href="https://github.com/reichlab" id="github-btn" target="_blank">
            <span class="fa-lg">
              <i class="fa fa-github-alt"></i>
            </span>
            <span class="btn-text">
              <span class="text-light">github /</span>
              <strong>reichlab</strong>
            </span>
          </a>
          <a href="https://twitter.com/reichlab" id="twitter-btn" target="_blank">
            <span class="fa-lg">
              <i class="fa fa-twitter"></i>
            </span>
            <span class="btn-text">
              <span class="text-light">twitter /</span>
              <strong>@reichlab</strong>
            </span>
          </a>
        </p>
        <p class="foot-note"><small>&copy; Nicholas Reich 2024. Source code available <a href="https://github.com/reichlab/reichlab.github.io">here</a>.</small></p>
      </div>
    </div>
  </section>
</footer>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
 var sc_project=10491184;
 var sc_invisible=1;
 var sc_security="40c0ea38";
 var scJsHost = (("https:" == document.location.protocol) ?
                 "https://secure." : "http://www.");
 document.write("<sc" + "ript type='text/javascript' src='" +
                scJsHost + "statcounter.com/counter/counter.js'></" +
                "script>");
</script>
<noscript>
  <div class="statcounter">
    <a title="shopify site analytics"
       href="http://statcounter.com/shopify/" target="_blank">
      <img class="statcounter"
           src="http://c.statcounter.com/10491184/0/40c0ea38/1/"
           alt="shopify site analytics">
    </a>
  </div>
</noscript>
<!-- End of StatCounter Code for Default Guide -->

  </body>
</html>
